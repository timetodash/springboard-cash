(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1577:function(t,e,n){"use strict";n.r(e);n(20),n(15),n(12),n(6),n(16);var o=n(37),r=(n(91),n(17)),c=n(2),d=n(85);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h=n(13),v=h.Unit,f={data:function(){return{campaignId:void 0,dialog:!1,pledgeAmount:"",pledgeMessage:"",isConfirmLoading:!1,isRedeemed:!1,isDestroyed:!1,redeemLoopIterationsAfterDestroy:0}},computed:m(m({},Object(d.c)(["getDocumentById","getSumPledges","getIdentityId","getCampaignPledges","getRedemptionTxId","getUsernameByOwnerId"])),{},{campaign:function(){return this.getDocumentById(this.campaignId)||void 0},isPledgeAmountValid:function(){return!0===this.isNotPledgeAmountTooLarge()&&!0===this.isNotPledgeAmountTooSmall()}}),destroyed:function(){this.isDestroyed=!0},updated:function(){console.log("something updated",this.getSumPledges(this.campaignId),this.getRedemptionTxId(this.campaignId)),this.getSumPledges(this.campaignId)>=this.campaign.amount&&null===this.getRedemptionTxId(this.campaignId)&&(console.log("this project has enough backing, will redeem now:"),this.redeemTx({campaignId:this.campaignId}))},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.campaignId=t.$route.params.id,e.next=3,t.isClientReady();case 3:return e.next=5,t.fetchDocumentById({typeLocator:"springboard.campaign",docId:t.campaignId});case 5:case"end":return e.stop()}}),e)})))()},methods:m(m({},Object(d.b)(["fetchDocuments","fetchDocumentById","isClientReady","createPledgeUtxo","submitDocument","fetchPledges","redeemTx","fetchRedemptionState"])),{},{DuffsinDash:function(t){return v.fromSatoshis(t).toBTC()},isNotPledgeAmountTooLarge:function(){var t=this.chooseMaxPledgeAmount(this.campaignId);return t?v.fromBTC(this.pledgeAmount).toSatoshis()<=v.fromBTC(t).toSatoshis()||"Amount too large":"Max Amount not available"},isNotPledgeAmountTooSmall:function(){var t=h.Unit.fromBTC(this.pledgeAmount).toSatoshis(),e=this.campaign.amount/16;return t<=0?"Be positive":t<500?"This is just dust":!(t<e)||"Min amount is ".concat(h.Unit.fromSatoshis(e).toBTC())},confirmPledge:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isConfirmLoading=!0,e.next=3,t.createPledgeUtxo({campaignRecipient:t.campaign.payoutAddress,campaignSatoshis:t.campaign.amount,pledgeSatoshis:v.fromBTC(t.pledgeAmount).toSatoshis()});case 3:return n=e.sent,r=Object(o.a)(n,2),c=r[0],d=r[1],l={campaignId:t.campaign.$id,message:t.pledgeMessage,utxo:c,tx:d},e.next=10,t.submitDocument({typeLocator:"springboard.pledge",doc:l});case 10:return e.next=12,t.fetchDocuments({typeLocator:"springboard.pledge",queryOpts:{where:[["campaignId","==",t.campaignId]],orderBy:[["$createdAt","desc"]]}});case 12:console.log("this.getSumPledges(this.campaignId) :>> ",t.getSumPledges(t.campaignId)),console.log("this.campaign.amount :>> ",t.campaign.amount),t.dialog=!1,t.isConfirmLoading=!1,t.pledgeMessage="",t.pledgeAmount="";case 18:case"end":return e.stop()}}),e)})))()},progressPledges:function(t){return parseInt(this.getSumPledges(t.$id))/parseInt(this.campaign.amount)*100},chooseMaxPledgeAmount:function(t){var e=v.fromBTC(this.$store.state.walletBalance).toSatoshis(),n=parseInt(this.campaign.amount)-this.getSumPledges(t.$id),o=e>n?n:e;return this.DuffsinDash(o)}})},x=n(92),_=n(114),y=n.n(_),I=n(1556),C=n(377),P=n(373),w=n(136),S=n(1551),A=n(1558),D=n(1557),T=n(376),O=n(1553),B=n(1571),k=n(1548),j=n(218),V=n(1549),R=n(1572),M=n(1573),component=Object(x.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.campaign?t._e():n("v-card",{staticClass:"mx-5 my-5"},[n("v-skeleton-loader",{attrs:{type:"card-heading, list-item-two-line"}})],1),t._v(" "),t.campaign?n("v-container",{staticStyle:{"max-width":"1000px"}},[t.getRedemptionTxId(t.campaignId)||t.getSumPledges(t.campaignId)>=t.campaign.amount?n("v-alert",{attrs:{color:"cyan",outlined:"",icon:"mdi-balloon"}},[n("strong",[t._v("Congratulations!")]),t._v(" This Project is successfully funded!\n    ")]):t._e(),t._v(" "),n("v-row",[n("v-col",[n("v-card",{staticClass:"mx-5 my-5",attrs:{elevation:"0","min-height":"155"}},[n("v-card-subtitle",{staticClass:"mb-0 py-0 px-0"},[t._v("\n            "+t._s(t.getUsernameByOwnerId(t.campaign.$ownerId))+"\n          ")]),t._v(" "),n("v-card-title",{staticClass:"pledged mt-0 pt-0 px-0"},[t._v("\n            "+t._s(t.campaign.title)+"\n          ")]),t._v(" "),n("v-card-text",{staticClass:"px-0",staticStyle:{"font-size":"20px","font-weight":"500px"},attrs:{"aria-autocomplete":"false\n            "}},[t._v("\n            "+t._s(t.campaign.description)+"\n          ")])],1)],1),t._v(" "),n("v-col",[n("v-progress-linear",{staticClass:"mt-5",attrs:{height:"18",color:"cyan",striped:"",value:t.progressPledges(t.campaign)}}),t._v(" "),n("div",[n("div",{staticClass:"pledgedtext"},[t._v("\n            backed\n            "),n("span",{staticClass:"pledged"},[t._v("\n              "+t._s(t.DuffsinDash(t.getSumPledges(t.campaignId)))+" Dash\n            ")])]),t._v(" "),n("div",{staticClass:"pledgedtext"},[t._v("\n            goal\n            "),n("span",{staticClass:"pledged"},[t._v("\n              "+t._s(t.DuffsinDash(t.campaign.amount))+" Dash\n            ")]),t._v(" "),n("span")]),t._v(" "),n("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-row",{attrs:{"no-gutters":""}},[t.getRedemptionTxId(t.campaignId)?t._e():n("v-btn",t._g(t._b({staticClass:"mt-2 mx-auto",attrs:{block:"",color:"#7B1FA2",dark:!!t.getIdentityId,disabled:!t.getIdentityId||t.getSumPledges(t.campaignId)>=t.campaign.amount}},"v-btn",r,!1),o),[t._v("\n                  Back this Project\n                ")]),t._v(" "),t.getRedemptionTxId(t.campaignId)||t.getSumPledges(t.campaignId)>=t.campaign.amount?n("v-btn",{staticClass:"pledgedtext",attrs:{disabled:!t.getRedemptionTxId(t.campaignId),block:"",color:"#00BCD4"}},[n("a",{staticStyle:{"text-decoration":"none",color:"white"},attrs:{href:"https://testnet-insight.dashevo.org/insight/tx/"+t.getRedemptionTxId(t.campaignId),target:"_blank"}},[t._v("View Transaction")])]):t._e()],1)]}}],null,!1,1865825390),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"600",align:"start"}},[n("v-card-title",[n("div",{staticClass:"pr-4 mb-4 pledgedtext"},[t._v("Back project")]),t._v(" "),n("div",{staticClass:"mb-4",staticStyle:{"font-size":"30px","font-weight":"bold",color:"purple"}},[t._v("\n                  "+t._s(t.campaign.title)+"\n                ")]),t._v(" "),n("v-text-field",{staticClass:"input_center",staticStyle:{"font-size":"35px"},attrs:{rules:[t.isNotPledgeAmountTooLarge(),t.isNotPledgeAmountTooSmall()],height:"55",color:"#00BCD4",placeholder:"1 Dash","aria-autocomplete":"false",autocomplete:"false",required:"",autofocus:""},model:{value:t.pledgeAmount,callback:function(e){t.pledgeAmount=e},expression:"pledgeAmount"}}),t._v(" "),n("v-btn",{staticClass:"mx-auto",staticStyle:{"font-size":"12px"},attrs:{text:"",link:"",color:"#7b1fa2",depressed:""},on:{click:function(e){t.pledgeAmount=t.chooseMaxPledgeAmount(t.campaign)}}},[t._v("\n                  Pledge Max Amount:\n                  "+t._s(t.chooseMaxPledgeAmount(t.campaign)+" Dash")+"\n                ")]),t._v(" "),n("v-card-text",{staticClass:"px-0"},[n("v-textarea",{staticClass:"mt-4 mx-auto",attrs:{rows:"1",color:"cyan",placeholder:"Add Optional Message"},model:{value:t.pledgeMessage,callback:function(e){t.pledgeMessage=e},expression:"pledgeMessage"}})],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{staticStyle:{color:"white"},attrs:{loading:t.isConfirmLoading,color:"#00BCD4",disabled:!t.isPledgeAmountValid&&t.chooseMaxPledgeAmount(t.campaign)>0},on:{click:t.confirmPledge}},[t._v("Back this Project")])],1)],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),n("v-timeline",{staticStyle:{"max-width":"900px",margin:"auto"}},t._l(t.getCampaignPledges(t.campaignId).reverse(),(function(e,o){return n("v-timeline-item",{key:o,attrs:{small:"",color:"#00BCD4"}},[n("v-card",{staticClass:"elevation-2 pl-4 pr-4 pt-2",attrs:{"max-width":"400",shaped:""}},[n("div",{staticStyle:{"font-weight":"400","font-size":"18px"}},[n("span",{staticStyle:{color:"#7b1fa2","font-weight":"bold"}},[t._v("\n            "+t._s(t.getUsernameByOwnerId(e.$ownerId))+"\n          ")]),t._v("\n          backed\n          "),n("span",{staticStyle:{color:"#7b1fa2","font-weight":"bold"}},[t._v("\n            "+t._s(e._dash)+"\n          ")]),t._v("\n          Dash\n        ")]),t._v(" "),e.message?n("div",{staticStyle:{"font-style":"italic"}},[t._v('\n          "'+t._s(e.message)+'"\n        ')]):t._e(),t._v(" "),n("Timeago",{staticStyle:{color:"#787878","font-size":"15px"},attrs:{datetime:e.$createdAt}})],1)],1)})),1)],1)}),[],!1,null,null,null);e.default=component.exports;y()(component,{VAlert:I.a,VBtn:C.a,VCard:P.a,VCardActions:w.a,VCardSubtitle:w.b,VCardText:w.c,VCardTitle:w.d,VCol:S.a,VContainer:A.a,VDialog:D.a,VProgressLinear:T.a,VRow:O.a,VSkeletonLoader:B.a,VSpacer:k.a,VTextField:j.a,VTextarea:V.a,VTimeline:R.a,VTimelineItem:M.a})}}]);